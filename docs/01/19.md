https://www.oschina.net/translate/cooperative-multitasking-using-coroutines-in-php